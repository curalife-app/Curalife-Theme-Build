{% comment %}
	Block Width Styles Snippet

	Renders CSS to set the width of a block based on its block_width_percent setting.
	Adjusts the width to account for gaps between columns.

	Parameters:
	- block_id: The ID of the block
	- width_percent: The width percentage from block settings
	- columns: Number of columns for desktop (default: 2)
	- columns_mobile: Number of columns for mobile (default: 1)
	- gap_width: Gap width in rem (default: 2)
{% endcomment %}

{% assign columns = columns | default: 2 %}
{% assign columns_mobile = columns_mobile | default: 1 %}
{% assign gap_width = gap_width | default: 2 %}

{% if width_percent %}
	<style>
		/* Set custom width - using !important to override section defaults */
		#shopify-block-{{ block_id }} {
			width: {{ width_percent }}% !important;
			flex-basis: {{ width_percent }}% !important;
			/* Apply margin to account for gap - half of gap on each side except outer edges */
			margin-right: calc({{ gap_width }}rem / {{ columns }} / 2);
			margin-left: calc({{ gap_width }}rem / {{ columns }} / 2);
			/* Adjust width to account for margins */
			box-sizing: border-box;
		}

		@media (max-width: 768px) {
			#shopify-block-{{ block_id }} {
				width: {{ width_percent }}% !important;
				flex-basis: {{ width_percent }}% !important;
				margin-right: calc({{ gap_width | times: 0.75 }}rem / {{ columns_mobile }} / 2);
				margin-left: calc({{ gap_width | times: 0.75 }}rem / {{ columns_mobile }} / 2);
			}
		}
	</style>
{% endif %}
