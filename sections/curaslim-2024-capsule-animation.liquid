{% comment %}
Capsule Animation Section
{% endcomment %}

<section class="capsule-animation-section">
  <div class="container">
    {% render 'title',
      section_id: section.id,
      title: '<span>One Capsule,</span> Triple Action',
      title_tag: 'h2',
      subtitle: '100% Natural, No Shots, No Chemicals',
      span_color: section.settings.title_highlight_color,
      padding_bottom: '30',
      padding_top: 0
    %}

    <div class="capsule-animation">
      <div class="pill">
        <img class="pill-half left" src="{{ 'pill-half.png' | asset_url }}" alt="Curaslim 2024 Capsule Animation Pill Half Left" loading="lazy">
        <img class="pill-half right" src="{{ 'pill_R.png' | asset_url }}" alt="Curaslim 2024 Capsule Animation Pill Half Right" loading="lazy">
      </div>

      <div class="fallen-items">
        {% for i in (1..3) %}
          <img class="fallen-item" src="{{ 'Control_Craving_Portion' | append: i | append: '.png' | asset_url }}" alt="Curaslim 2024 Capsule Animation Fallen Item {{ i }}" loading="lazy">
        {% endfor %}
      </div>

      <img class="powder" src="{{ 'powder.png' | asset_url }}" alt="Curaslim 2024 Capsule Animation Powder" loading="lazy">
    </div>
  </div>
</section>

<style>
  .capsule-animation-section {
    overflow: clip;
  }

  .capsule-animation {
    position: relative;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    min-height: 800px;
    margin-top: 100px;
  }

  .pill {
    position: relative;
    z-index: 2;
  }

  .pill-half {
    animation-duration: 1s;
    animation-fill-mode: forwards;
    animation-timing-function: ease-out;
    opacity: 0;
  }

  .pill-half.left {
    animation-name: openPillLeft;
    transform-origin: right center;
  }

  .pill-half.right {
    animation-name: openPillRight;
    transform-origin: left center;
  }

  @keyframes openPillLeft {
    0% { opacity: 0; transform: translateX(0) rotate(0deg); }
    100% { opacity: 1; transform: translateX(-50%) rotate(30deg); }
  }

  @keyframes openPillRight {
    0% { opacity: 0; transform: translateX(0) rotate(0deg); }
    100% { opacity: 1; transform: translateX(50%) rotate(-30deg); }
  }

  .powder {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: -1;
    opacity: 0;
    animation: fadeInPowder 1s ease-out 0.5s forwards;
  }

  @keyframes fadeInPowder {
    0% { opacity: 0; }
    100% { opacity: 1; }
  }

  .fallen-items {
    position: absolute;
    top: 30%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 1;
    width: 300px;
    height: 300px;
  }

  .fallen-item {
    position: absolute;
    opacity: 0;
    animation: fallAnimation 1s ease-out forwards;
  }

  .fallen-item:nth-child(1) { animation-name: fallAnimationLeft; }
  .fallen-item:nth-child(2) { animation-name: fallAnimationCenter; animation-delay: 0.1s; }
  .fallen-item:nth-child(3) { animation-name: fallAnimationRight; animation-delay: 0.2s; }

  @keyframes fallAnimationLeft {
    0% { opacity: 0; width: 40%; transform: translate(50%, 0); }
    20% { opacity: 1; width: 60%; }
    100% { opacity: 1; width: 100%; transform: translate(-100%, 500px); }
  }

  @keyframes fallAnimationCenter {
    0% { opacity: 0; width: 40%; transform: translate(50%, 0); }
    20% { opacity: 1; width: 60%; }
    100% { opacity: 1; width: 100%; transform: translate(60%, 600px); }
  }

  @keyframes fallAnimationRight {
    0% { opacity: 0; width: 40%; transform: translate(50%, 0); }
    20% { opacity: 1; width: 60%; }
    100% { opacity: 1; width: 100%; transform: translate(120%, 400px); }
  }

  @media (max-width: 768px) {
    .pill-half { width: 66.67%; }

    @keyframes fallAnimationLeft,
    @keyframes fallAnimationCenter,
    @keyframes fallAnimationRight {
      100% { transform: translate(0, 500px); }
    }
  }
</style>

{% schema %}
{
  "name": "Capsule Animation",
  "settings": [],
  "presets": [
    {
      "category": "Page",
      "name": "Capsule Animation"
    }
  ]
}
{% endschema %}