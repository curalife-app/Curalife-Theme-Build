<section class="weight-loss-calculator">
  <div class="weight-display">
    <div class="weight-title flex items-center font-bold">
      <img src="https://cdn.shopify.com/s/files/1/0452/2459/1511/files/wightloss-icons.png?v=1723544732" alt="weight loss">
      <span>Your current<br>weight</span>
    </div>
    <span class="current-weight" id="currentWeight">150 lbs</span>
  </div>

  <input type="range"
          min="{{ section.settings.min_weight }}"
          max="{{ section.settings.max_weight }}"
          value="150"
          class="slider"
          id="weightSlider">

  <div class="result flex items-center justify-between">
    <div class="left">
      <div class="font-bold">Weight you could lose (Ibs)</div>
      <div class="bg-[--orange] italic rounded-full px-1 py-2 mt-1">With Curaslim</div>
    </div>
    <div class="result-value text-[--curaslim]" id="weightLoss">22 lbs</div>
  </div>
</section>

<style>
  .weight-loss-calculator {
    border-radius: 24px;
    background: linear-gradient(180deg, #F7F7F4 40.95%, #9F9D5E 190.95%);
    box-shadow: 0px 16px 32px 0px rgba(18, 18, 18, 0.10);
    padding: 30px 100px;
    width: 800px;
    margin: 0 auto;
  }

  .weight-loss-calculator h2 {
    font-size: 1.2em;
    font-weight: bold;
    margin-bottom: 20px;
  }

  .weight-display {
    display: flex;
    justify-content: space-between;
    margin-bottom: 10px;
  }

  .current-weight {
    font-size: 1.5em;
    font-weight: bold;
  }

  .slider {
    width: 100%;
    margin-bottom: 20px;
    cursor: pointer;
  }

  .result {
    background-color: white;
    padding: 1rem;
    border-radius: 15px;
  }

  .result-value {
    font-size: 1.5em;
    font-weight: bold;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const slider = document.getElementById('weightSlider');
    const currentWeight = document.getElementById('currentWeight');
    const weightLoss = document.getElementById('weightLoss');

    function calculateWeightLoss(weight) {
      // This is a simplified calculation and should not be considered medical advice
      const potentialLoss = Math.round(weight * 0.15);
      return Math.min(potentialLoss, 39); // Cap at 39 lbs for this example
    }

    function updateWeightLoss() {
      const weight = slider.value;
      currentWeight.textContent = `${weight} lbs`;
      weightLoss.textContent = `${calculateWeightLoss(weight)} lbs`;
    }

    slider.addEventListener('input', updateWeightLoss);
    updateWeightLoss(); // Initial calculation
  });
</script>

{% schema %}
  {
    "name": "Weight Loss Calculator",
    "settings": [
      {
        "type": "text",
        "id": "title",
        "label": "Widget Title",
        "default": "Weight Loss Estimator"
      },
      {
        "type": "range",
        "id": "min_weight",
        "min": 50,
        "max": 200,
        "step": 10,
        "unit": "lbs",
        "label": "Minimum Weight",
        "default": 100
      },
      {
        "type": "range",
        "id": "max_weight",
        "min": 200,
        "max": 500,
        "step": 10,
        "unit": "lbs",
        "label": "Maximum Weight",
        "default": 400
      }
    ],
    "presets": [
      {
        "name": "Weight Loss Calculator",
        "category": "Custom"
      }
    ]
  }
  {% endschema %}