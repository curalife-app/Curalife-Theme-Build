!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function n(e){var t="function"==typeof Map?new Map:void 0;return n=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return function(e,t,r){if(c())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,t);var i=new(e.bind.apply(e,n));return r&&v(i,r.prototype),i}(e,arguments,d(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),v(r,e)},n(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function u(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(t){var r=function(t,r){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,r||"default");if("object"!=e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==e(r)?r:r+""}function a(t,r,n){return r=d(r),function(t,r){if(r&&("object"==e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}(t,c()?Reflect.construct(r,n||[],d(t).constructor):r.apply(t,n))}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c=function(){return!!e})()}function l(e,t,r,n){var i=h(d(1&n?e.prototype:e),t,r);return 2&n&&"function"==typeof i?function(e){return i.apply(r,e)}:i}function h(){return h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},h.apply(null,arguments)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}System.register(["./pubsub-legacy-chunk.js"],(function(e,r){"use strict";return{setters:[null],execute:function(){var e=function(){function e(){var t;return i(this,e),(t=a(this,e)).cachedResults={},t.predictiveSearchResults=t.querySelector("[data-predictive-search]"),t.allPredictiveSearchInstances=document.querySelectorAll("predictive-search"),t.isOpen=!1,t.abortController=new AbortController,t.searchTerm="",t.setupEventListeners(),t}return f(e,SearchForm),u(e,[{key:"setupEventListeners",value:function(){this.input.form.addEventListener("submit",this.onFormSubmit.bind(this)),this.input.addEventListener("focus",this.onFocus.bind(this)),this.addEventListener("focusout",this.onFocusOut.bind(this)),this.addEventListener("keyup",this.onKeyup.bind(this)),this.addEventListener("keydown",this.onKeydown.bind(this))}},{key:"getQuery",value:function(){return this.input.value.trim()}},{key:"onChange",value:function(){l(e,"onChange",this,3)([]);var t,r=this.getQuery();this.searchTerm&&r.startsWith(this.searchTerm)||(null===(t=this.querySelector("#predictive-search-results-groups-wrapper"))||void 0===t||t.remove());this.updateSearchForTerm(this.searchTerm,r),this.searchTerm=r,this.searchTerm.length?this.getSearchResults(this.searchTerm):this.close(!0)}},{key:"onFormSubmit",value:function(e){this.getQuery().length&&!this.querySelector('[aria-selected="true"] a')||e.preventDefault()}},{key:"onFormReset",value:function(t){l(e,"onFormReset",this,3)([t]),l(e,"shouldResetForm",this,3)([])&&(this.searchTerm="",this.abortController.abort(),this.abortController=new AbortController,this.closeResults(!0))}},{key:"onFocus",value:function(){var e=this.getQuery();e.length&&(this.searchTerm!==e?this.onChange():"true"===this.getAttribute("results")?this.open():this.getSearchResults(this.searchTerm))}},{key:"onFocusOut",value:function(){var e=this;setTimeout((function(){e.contains(document.activeElement)||e.close()}))}},{key:"onKeyup",value:function(e){switch(this.getQuery().length||this.close(!0),e.preventDefault(),e.code){case"ArrowUp":this.switchOption("up");break;case"ArrowDown":this.switchOption("down");break;case"Enter":this.selectOption()}}},{key:"onKeydown",value:function(e){"ArrowUp"!==e.code&&"ArrowDown"!==e.code||e.preventDefault()}},{key:"updateSearchForTerm",value:function(e,t){var r=this.querySelector("[data-predictive-search-search-for-text]"),n=null==r?void 0:r.innerText;if(n){if(n.match(new RegExp(e,"g")).length>1)return;var i=n.replace(e,t);r.innerText=i}}},{key:"switchOption",value:function(e){if(this.getAttribute("open")){var t="up"===e,r=this.querySelector('[aria-selected="true"]'),n=Array.from(this.querySelectorAll("li, button.predictive-search__item")).filter((function(e){return null!==e.offsetParent})),i=0;if(!t||r){for(var o=-1,u=0;-1===o&&u<=n.length;)n[u]===r&&(o=u),u++;if(this.statusElement.textContent="",!t&&r?i=o===n.length-1?0:o+1:t&&(i=0===o?n.length-1:o-1),i!==o){var s=n[i];s.setAttribute("aria-selected",!0),r&&r.setAttribute("aria-selected",!1),this.input.setAttribute("aria-activedescendant",s.id)}}}}},{key:"selectOption",value:function(){var e=this.querySelector('[aria-selected="true"] a, button[aria-selected="true"]');e&&e.click()}},{key:"getSearchResults",value:function(e){var t=this,r=e.replace(" ","-").toLowerCase();this.setLiveRegionLoadingState(),this.cachedResults[r]?this.renderSearchResults(this.cachedResults[r]):fetch("".concat(routes.predictive_search_url,"?q=").concat(encodeURIComponent(e),"&section_id=predictive-search"),{signal:this.abortController.signal}).then((function(e){if(!e.ok){var r=new Error(e.status);throw t.close(),r}return e.text()})).then((function(e){var n=(new DOMParser).parseFromString(e,"text/html").querySelector("#shopify-section-predictive-search").innerHTML;t.allPredictiveSearchInstances.forEach((function(e){e.cachedResults[r]=n})),t.renderSearchResults(n)})).catch((function(e){if(20!==(null==e?void 0:e.code))throw t.close(),e}))}},{key:"setLiveRegionLoadingState",value:function(){this.statusElement=this.statusElement||this.querySelector(".predictive-search-status"),this.loadingText=this.loadingText||this.getAttribute("data-loading-text"),this.setLiveRegionText(this.loadingText),this.setAttribute("loading",!0)}},{key:"setLiveRegionText",value:function(e){var t=this;this.statusElement.setAttribute("aria-hidden","false"),this.statusElement.textContent=e,setTimeout((function(){t.statusElement.setAttribute("aria-hidden","true")}),1e3)}},{key:"renderSearchResults",value:function(e){this.predictiveSearchResults.innerHTML=e,this.setAttribute("results",!0),this.setLiveRegionResults(),this.open()}},{key:"setLiveRegionResults",value:function(){this.removeAttribute("loading"),this.setLiveRegionText(this.querySelector("[data-predictive-search-live-region-count-value]").textContent)}},{key:"getResultsMaxHeight",value:function(){return this.resultsMaxHeight=window.innerHeight-document.querySelector(".section-header").getBoundingClientRect().bottom,this.resultsMaxHeight}},{key:"open",value:function(){this.predictiveSearchResults.style.maxHeight=this.resultsMaxHeight||"".concat(this.getResultsMaxHeight(),"px"),this.setAttribute("open",!0),this.input.setAttribute("aria-expanded",!0),this.isOpen=!0}},{key:"close",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.closeResults(e),this.isOpen=!1}},{key:"closeResults",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&(this.input.value="",this.removeAttribute("results"));var e=this.querySelector('[aria-selected="true"]');e&&e.setAttribute("aria-selected",!1),this.input.setAttribute("aria-activedescendant",""),this.removeAttribute("loading"),this.removeAttribute("open"),this.input.setAttribute("aria-expanded",!1),this.resultsMaxHeight=!1,this.predictiveSearchResults.removeAttribute("style")}}])}();customElements.define("predictive-search",e);var r=function(e){function t(){var e;return i(this,t),(e=a(this,t)).input=e.querySelector('input[type="search"]'),e.resetButton=e.querySelector('button[type="reset"]'),e.input&&(e.input.form.addEventListener("reset",e.onFormReset.bind(e)),e.input.addEventListener("input",debounce((function(t){e.onChange(t)}),300).bind(e))),e}return f(t,e),u(t,[{key:"toggleResetButton",value:function(){var e=this.resetButton.classList.contains("hidden");this.input.value.length>0&&e?this.resetButton.classList.remove("hidden"):0!==this.input.value.length||e||this.resetButton.classList.add("hidden")}},{key:"onChange",value:function(){this.toggleResetButton()}},{key:"shouldResetForm",value:function(){return!document.querySelector('[aria-selected="true"] a')}},{key:"onFormReset",value:function(e){e.preventDefault(),this.shouldResetForm()&&(this.input.value="",this.input.focus(),this.toggleResetButton())}}])}(n(HTMLElement));customElements.define("search-form",r);var o=function(){function e(){var t;return i(this,e),(t=a(this,e)).allSearchInputs=document.querySelectorAll('input[type="search"]'),t.setupEventListeners(),t}return f(e,SearchForm),u(e,[{key:"setupEventListeners",value:function(){var e=this,t=[];this.allSearchInputs.forEach((function(e){return t.push(e.form)})),this.input.addEventListener("focus",this.onInputFocus.bind(this)),t.length<2||(t.forEach((function(t){return t.addEventListener("reset",e.onFormReset.bind(e))})),this.allSearchInputs.forEach((function(t){return t.addEventListener("input",e.onInput.bind(e))})))}},{key:"onFormReset",value:function(t){l(e,"onFormReset",this,3)([t]),l(e,"shouldResetForm",this,3)([])&&this.keepInSync("",this.input)}},{key:"onInput",value:function(e){var t=e.target;this.keepInSync(t.value,t)}},{key:"onInputFocus",value:function(){window.innerWidth<750&&this.scrollIntoView({behavior:"smooth"})}},{key:"keepInSync",value:function(e,t){this.allSearchInputs.forEach((function(r){r!==t&&(r.value=e)}))}}])}();customElements.define("main-search",o);var s=function(e){function r(){var e;i(this,r),(e=a(this,r)).onActiveFilterClick=e.onActiveFilterClick.bind(e),e.debouncedOnSubmit=debounce((function(t){e.onSubmitHandler(t)}),500),e.querySelector("form").addEventListener("input",e.debouncedOnSubmit.bind(e));var t=e.querySelector("#FacetsWrapperDesktop");return t&&t.addEventListener("keyup",onKeyUpEscape),e}return f(r,e),u(r,[{key:"createSearchParams",value:function(e){var t=new FormData(e);return new URLSearchParams(t).toString()}},{key:"onSubmitForm",value:function(e,t){r.renderPage(e,t)}},{key:"onSubmitHandler",value:function(e){var t=this;e.preventDefault();var r=document.querySelectorAll("facet-filters-form form");if("mobile-facets__checkbox"==e.srcElement.className){var n=this.createSearchParams(e.target.closest("form"));this.onSubmitForm(n,e)}else{var i=[],o="FacetFiltersFormMobile"===e.target.closest("form").id;r.forEach((function(e){o?"FacetFiltersFormMobile"===e.id&&i.push(t.createSearchParams(e)):"FacetSortForm"!==e.id&&"FacetFiltersForm"!==e.id&&"FacetSortDrawerForm"!==e.id||(document.querySelectorAll(".no-js-list").forEach((function(e){return e.remove()})),i.push(t.createSearchParams(e)))})),this.onSubmitForm(i.join("&"),e)}}},{key:"onActiveFilterClick",value:function(e){e.preventDefault(),r.toggleActiveFacets();var t=-1==e.currentTarget.href.indexOf("?")?"":e.currentTarget.href.slice(e.currentTarget.href.indexOf("?")+1);r.renderPage(t)}}],[{key:"setListeners",value:function(){window.addEventListener("popstate",(function(e){var t=e.state?e.state.searchParams:r.searchParamsInitial;t!==r.searchParamsPrev&&r.renderPage(t,null,!1)}))}},{key:"toggleActiveFacets",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];document.querySelectorAll(".js-facet-remove").forEach((function(t){t.classList.toggle("disabled",e)}))}},{key:"renderPage",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];r.searchParamsPrev=e;var i=r.getSections(),o=document.getElementById("ProductCount"),u=document.getElementById("ProductCountDesktop");document.getElementById("ProductGridContainer").querySelector(".collection").classList.add("loading"),o&&o.classList.add("loading"),u&&u.classList.add("loading"),i.forEach((function(n){var i="".concat(window.location.pathname,"?section_id=").concat(n.section,"&").concat(e),o=function(e){return e.url===i};r.filterData.some(o)?r.renderSectionFromCache(o,t):r.renderSectionFromFetch(i,t)})),n&&r.updateURLHash(e)}},{key:"renderSectionFromFetch",value:function(e,n){fetch(e).then((function(e){return e.text()})).then((function(i){var o=i;r.filterData=[].concat(t(r.filterData),[{html:o,url:e}]),r.renderFilters(o,n),r.renderProductGridContainer(o),r.renderProductCount(o)}))}},{key:"renderSectionFromCache",value:function(e,t){var n=r.filterData.find(e).html;r.renderFilters(n,t),r.renderProductGridContainer(n),r.renderProductCount(n)}},{key:"renderProductGridContainer",value:function(e){document.getElementById("ProductGridContainer").innerHTML=(new DOMParser).parseFromString(e,"text/html").getElementById("ProductGridContainer").innerHTML}},{key:"renderProductCount",value:function(e){var t=(new DOMParser).parseFromString(e,"text/html").getElementById("ProductCount").innerHTML,r=document.getElementById("ProductCount"),n=document.getElementById("ProductCountDesktop");r.innerHTML=t,r.classList.remove("loading"),n&&(n.innerHTML=t,n.classList.remove("loading"))}},{key:"renderFilters",value:function(e,t){var n=(new DOMParser).parseFromString(e,"text/html"),i=n.querySelectorAll("#FacetFiltersForm .js-filter, #FacetFiltersFormMobile .js-filter, #FacetFiltersPillsForm .js-filter"),o=function(e){var r=t?t.target.closest(".js-filter"):void 0;return!!r&&e.dataset.index===r.dataset.index},u=Array.from(i).filter((function(e){return!o(e)})),s=Array.from(i).find(o);u.forEach((function(e){document.querySelector('.js-filter[data-index="'.concat(e.dataset.index,'"]')).innerHTML=e.innerHTML})),r.renderActiveFacets(n),r.renderAdditionalElements(n),s&&r.renderCounts(s,t.target.closest(".js-filter"))}},{key:"renderActiveFacets",value:function(e){[".active-facets-mobile",".active-facets-desktop"].forEach((function(t){var r=e.querySelector(t);r&&(document.querySelector(t).innerHTML=r.innerHTML)})),r.toggleActiveFacets(!1)}},{key:"renderAdditionalElements",value:function(e){[".mobile-facets__open",".mobile-facets__count",".sorting"].forEach((function(t){e.querySelector(t)&&(document.querySelector(t).innerHTML=e.querySelector(t).innerHTML)})),document.getElementById("FacetFiltersFormMobile").closest("menu-drawer").bindEvents()}},{key:"renderCounts",value:function(e,t){var r=t.querySelector(".facets__selected"),n=e.querySelector(".facets__selected"),i=t.querySelector(".facets__summary"),o=e.querySelector(".facets__summary");n&&r&&(t.querySelector(".facets__selected").outerHTML=e.querySelector(".facets__selected").outerHTML),i&&o&&(t.querySelector(".facets__summary").outerHTML=e.querySelector(".facets__summary").outerHTML)}},{key:"updateURLHash",value:function(e){history.pushState({searchParams:e},"","".concat(window.location.pathname).concat(e&&"?".concat(e)))}},{key:"getSections",value:function(){return[{section:document.getElementById("product-grid").dataset.id}]}}])}(n(HTMLElement));s.filterData=[],s.searchParamsInitial=window.location.search.slice(1),s.searchParamsPrev=window.location.search.slice(1),customElements.define("facet-filters-form",s),s.setListeners();var c=function(e){function t(){var e;return i(this,t),(e=a(this,t)).querySelectorAll("input").forEach((function(t){return t.addEventListener("change",e.onRangeChange.bind(e))})),e.setMinAndMaxValues(),e}return f(t,e),u(t,[{key:"onRangeChange",value:function(e){this.adjustToValidValues(e.currentTarget),this.setMinAndMaxValues()}},{key:"setMinAndMaxValues",value:function(){var e=this.querySelectorAll("input"),t=e[0],r=e[1];r.value&&t.setAttribute("max",r.value),t.value&&r.setAttribute("min",t.value),""===t.value&&r.setAttribute("min",0),""===r.value&&t.setAttribute("max",r.getAttribute("max"))}},{key:"adjustToValidValues",value:function(e){var t=Number(e.value),r=Number(e.getAttribute("min")),n=Number(e.getAttribute("max"));t<r&&(e.value=r),t>n&&(e.value=n)}}])}(n(HTMLElement));customElements.define("price-range",c);var h=function(e){function t(){var e;i(this,t);var r=(e=a(this,t)).querySelector("a");return r.setAttribute("role","button"),r.addEventListener("click",e.closeFilter.bind(e)),r.addEventListener("keyup",(function(t){t.preventDefault(),"SPACE"===t.code.toUpperCase()&&e.closeFilter(t)})),e}return f(t,e),u(t,[{key:"closeFilter",value:function(e){e.preventDefault(),(this.closest("facet-filters-form")||document.querySelector("facet-filters-form")).onActiveFilterClick(e)}}])}(n(HTMLElement));customElements.define("facet-remove",h),console.log("üîç Search bundle loaded - Search functionality initialized")}}}))}();
