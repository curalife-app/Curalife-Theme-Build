<script>
  document.addEventListener('DOMContentLoaded', function() {
    let urlDontPassParams = ['page', 'category', 'default-variant'];
    let urlParams = new URLSearchParams(window.location.search);
    urlDontPassParams.forEach(param => urlParams.delete(param));

    document.querySelectorAll("[href]").forEach(link => {
      let currentLink = link.getAttribute('href');
      let isFullUrl = currentLink.startsWith("http://") || currentLink.startsWith("https://");
      let baseUrl = isFullUrl ? '' : `${window.location.protocol}//${window.location.hostname}`;
      let url = new URL(currentLink, baseUrl);

      urlParams.forEach((value, key) => {
        if (!url.searchParams.has(key)) {
          url.searchParams.set(key, value);
        }
      });

      link.setAttribute('href', url.href);
    });

    if (typeof $ !== 'undefined') { // Check if jQuery is available
      let blogLinks = $("header li a span:contains('Blog')").parent();
      let blogUrl = new URL("https://curalife.com/blogs/blog", window.location.origin);

      urlParams.forEach((value, key) => {
        if (!blogUrl.searchParams.has(key)) {
          blogUrl.searchParams.set(key, value);
        }
      });

      blogLinks.attr("href", blogUrl.href);
    } else {
      console.error('jQuery is not available.');
    }
  });
</script>