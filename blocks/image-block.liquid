{% comment %}
	Renders an image block, utilizing the 'image-test' snippet.

	Accepts:
	- block: The block object containing settings.
	- lazy: Boolean to control lazy loading (passed from section/parent).

	Usage:
	{% render 'image-block', block: block, lazy: lazyLoad %}
{% endcomment %}

{% assign blockMainImage = block.settings.image %}
{% assign blockMainMobileImage = block.settings.image_mobile %}

{% comment %} Global Store Overrides - Add your logic here if needed {% endcomment %}
{% comment %}
	{% if shop.name contains 'Global' %}
	  {% assign blockMainImage = block.settings.image_global | default: block.settings.image %}
	  {% assign blockMainMobileImage = block.settings.image_mobile_global | default: block.settings.image_mobile %}
	{% endif %}
{% endcomment %}

<div class="image-block-wrapper" {{ block.shopify_attributes }}>
	{%
		render 'image-test',
		image: blockMainImage,
		mobile_image: blockMainMobileImage,
		is_log: true,
		lazy: lazy | default: true,
		load_mobile: true,
		alt: blockMainImage.alt | default: 'Image block',
		link: block.settings.image_link,
		class: block.settings.additional_classes
	%}
</div>

{% schema %}
	{
		"name": "Image Block",
		"settings": [
			{
				"type": "image_picker",
				"id": "image",
				"label": "Image"
			},
			{
				"type": "image_picker",
				"id": "image_mobile",
				"label": "Mobile Image (Optional)"
			},
			{
				"type": "url",
				"id": "image_link",
				"label": "Image Link (Optional)"
			},
			{
				"type": "text",
				"id": "additional_classes",
				"label": "Additional CSS Classes"
			},
			{
				"type": "text",
				"id": "alt",
				"label": "Alt text",
				"info": "Describe the image for people who can't see it"
			},
			{
				"type": "range",
				"id": "custom_width",
				"label": "Custom Block Width",
				"min": 10,
				"max": 100,
				"step": 5,
				"unit": "%",
				"default": 100,
				"info": "Sets the width percentage of this block within its row."
			},
			{
				"type": "range",
				"id": "custom_width_mobile",
				"label": "Custom Block Width Mobile",
				"min": 10,
				"max": 100,
				"step": 5,
				"unit": "%",
				"default": 100
			}
		],
		"presets": [
			{
				"name": "Image Block"
			}
		]
	}
{% endschema %}
