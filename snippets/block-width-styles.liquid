{% comment %}
	Block Width Styles Snippet

	Renders CSS to set the width of a block based on its block_width_percent setting.
	Adjusts the width to account for gaps between columns.

	Parameters:
	- block_id: The ID of the block
	- width_percent: The width percentage from block settings
	- columns: Number of columns for desktop (default: 2)
	- columns_mobile: Number of columns for mobile (default: 1)
	- gap_width: Gap width in rem (default: 2)
	- gap_width_mobile: Optional mobile gap width
{% endcomment %}

{% assign columns = columns | default: 2 %}
{% assign columns_mobile = columns_mobile | default: 1 %}
{% assign gap_width = gap_width | default: 2 %}
{% assign gap_width_mobile = gap_width_mobile | default: gap_width | times: 0.75 %}

{% if width_percent %}
	<style>
		/* Calculate width based on the desired percentage of the total width */
		#shopify-block-{{ block_id }} {
			/* First establish what percentage of container we want to take */
			--desired-width: {{ width_percent }}%;

			/* Apply to properly handle the gap */
			width: calc(var(--desired-width)) !important;
			flex-basis: calc(var(--desired-width)) !important;
		}

		@media (max-width: 768px) {
			#shopify-block-{{ block_id }} {
				width: calc(({{ width_percent }}% * (100% - {{ gap_width_mobile }}rem * ({{ columns_mobile }} - 1)) / 100%)) !important;
				flex-basis: calc(({{ width_percent }}% * (100% - {{ gap_width_mobile }}rem * ({{ columns_mobile }} - 1)) / 100%)) !important;
			}
		}
	</style>
{% endif %}
