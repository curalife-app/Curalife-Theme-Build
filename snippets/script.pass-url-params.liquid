<script>
  document.addEventListener('DOMContentLoaded', function() {
    let urlParams = new URLSearchParams(window.location.search);
    urlParams.delete('page'); // Delete the 'page' parameter
    urlParams.delete('category'); // Delete the 'category' parameter

    let queryString = urlParams.toString() ? "?" + urlParams.toString() : "";
    let currentHostname = window.location.hostname;

    if (queryString) {
      document.querySelectorAll("[href]").forEach(link => {
        let currentLink = link.getAttribute('href');

        if (currentLink.startsWith("/") || currentLink.startsWith(".") ||
          (currentLink.startsWith("http") && currentLink.includes(currentHostname))) {
          if (currentLink.includes("?")) {
            link.setAttribute('href', currentLink + "&" + queryString.substring(1));
          } else {
            link.setAttribute('href', currentLink + queryString);
          }
        }
      });

      // Update the blog link in the header
      let blogLink = $("header li a span:contains('Blog')").parent();
      let currentBlogLink = blogLink.attr("href");
      blogLink.attr("href", currentBlogLink + queryString);
      if (currentBlogLink.includes("?")) {
        blogLink.attr("href", currentBlogLink + "&" + queryString.substring(1));
      } else {
        blogLink.setAttribute('href', currentBlogLink + queryString);
      }
    }
  });
</script>