
To use animation-timeline: view() and make the animation relative to the scroll, we need to use the latest CSS features that support scroll-driven animations. However, please note that these features are part of the newer CSS specifications and may not be fully supported across all browsers yet.

That being said, here is an example of how you can implement the animation using animation-timeline: view() and animation-range:

html
Copy code
<section>
  <div class="container">
    {% render 'title', section_id: section.id, title: '<span>One Capsule,</span> Triple Action', title_tag: 'h2', subtitle: '100% Natural, No Shots, No Chemicals', span_color: section.settings.title_highlight_color, padding_bottom: '30', padding_top: 0 %}

    <div class="capsule-animation flex items-center justify-center mt-8">
      <div class="pill relative flex justify-center">
        <img class="pill-half left m-0" src="https://cdn.shopify.com/s/files/1/0452/2459/1511/files/pill-half.png?v=1723722706" alt="Curaslim 2024 Capsule Animation Pill Half">
        <img class="pill-half right m-0 scale-x-[-1]" src="https://cdn.shopify.com/s/files/1/0452/2459/1511/files/pill-half.png?v=1723722706" alt="Curaslim 2024 Capsule Animation Pill Half">
      </div>
    </div>
  </div>
</section>

<style>
  .capsule-animation {
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 500px;
    scroll-timeline-name: scrollAnimation; /* Define scroll-timeline */
    scroll-timeline-axis: block;
  }

  .pill-half.left {
    animation: openPillLeft linear both;
    animation-timeline: view(scrollAnimation); /* Use the scroll-timeline */
    animation-range: cover 0% cover 100%;
  }

  .pill-half.right {
    animation: openPillRight linear both;
    animation-timeline: view(scrollAnimation);
    animation-range: cover 0% cover 100%;
  }

  @keyframes openPillLeft {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(180deg);
    }
  }

  @keyframes openPillRight {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(-180deg);
    }
  }
</style>

{% schema %}
  {
    "name": "Capsule Animation",
    "settings": [],
    "presets": [
      {
        "category": "Page",
        "name": "Capsule Animation"
      }
    ]
  }
{% endschema %}
