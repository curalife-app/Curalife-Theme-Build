{% if shop.name == 'CuraLife' %}
  <script>
    let isSubscription = false;
    window.intervalCounter = 0;

    const getCookie = name => (
      document.cookie.split(';')
      .find(c => c.trim().startsWith(`${name}=`))
      ?.split('=')[1]
    )

    function runAfterCookie(callback){
      var checker = window.setInterval(function() {
        const expCookie = getCookie('_gaexp');
        if (expCookie) {
          expCookie.split('!').forEach(cookie => {
            if (cookie.startsWith('GAX1.2.-u9VS31MR-eb55WI_onqYw')) {
              isSubscription = cookie.endsWith('1') ? true : false;
            }
          });
        }

        if (intervalCounter <= 15)
        {
          if (isSubscription) {
            clearInterval(checker);
            callback();
          }
        }
      }, 200);
    }

    document.addEventListener('DOMContentLoaded', function () {
      runAfterCookie(function() {
        if (isSubscription) {
          $('.cta-section.subscription').show();
          $('.cta-section:not(.subscription)').hide();

          $('.purchase-option-box.subscription').show();
      });
    }, false);
  </script>
{% endif %}