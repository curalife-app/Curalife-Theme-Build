{%- unless settings.cart_type == 'drawer' -%}
  <script src="{{ 'cart.js' | asset_url }}" defer="defer"></script>
{%- endunless -%}

<style>
  /* Container Styles */
  .cart-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 2rem;
    font-family: Arial, sans-serif;
  }

  /* Title and Continue Shopping Link */
  .title-wrapper {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
  }

  .title-wrapper h1 {
    font-size: 2rem;
    margin: 0;
  }

  .continue-shopping-link {
    font-size: 1rem;
    color: #007BFF;
    text-decoration: none;
  }

  /* Cart Empty State */
  .cart-empty {
    text-align: center;
    margin-top: 4rem;
  }

  .cart-empty h2 {
    font-size: 1.5rem;
    margin-bottom: 1rem;
  }

  .cart-empty .button {
    padding: 0.75rem 1.5rem;
    background-color: #007BFF;
    color: #FFFFFF;
    text-decoration: none;
    border-radius: 4px;
  }

  /* Table Styles */
  .cart-items {
    width: 100%;
    border-collapse: collapse;
  }

  .cart-items th,
  .cart-items td {
    padding: 1rem;
    border-bottom: 1px solid #E0E0E0;
    text-align: left;
  }

  .cart-items th {
    background-color: #F8F8F8;
    font-weight: normal;
  }

  /* Product Details */
  .product-image img {
    max-width: 100px;
    border-radius: 4px;
  }

  .product-details {
    vertical-align: top;
  }

  .product-title {
    font-size: 1.1rem;
    color: #000000;
    text-decoration: none;
  }

  .product-options,
  .product-properties {
    list-style: none;
    padding: 0;
    margin: 0.5rem 0 0;
    font-size: 0.9rem;
    color: #555555;
  }

  .product-options li,
  .product-properties li {
    margin-bottom: 0.25rem;
  }

  /* Price Styles */
  .product-price .original-price {
    text-decoration: line-through;
    color: #999999;
    margin-right: 0.5rem;
  }

  .product-price .final-price {
    color: #D32F2F;
    font-weight: bold;
  }

  .product-price .price {
    font-weight: bold;
  }

  /* Quantity Styles */
  .product-quantity {
    display: flex;
    align-items: center;
  }

  .product-quantity input {
    width: 60px;
    padding: 0.5rem;
    margin-right: 1rem;
    border: 1px solid #CCCCCC;
    border-radius: 4px;
    text-align: center;
  }

  .remove-item {
    color: #D32F2F;
    text-decoration: none;
    font-size: 1.5rem;
  }

  /* Total Price */
  .product-total {
    font-weight: bold;
  }

  /* Cart Totals */
  .cart-totals {
    text-align: right;
    margin-top: 2rem;
  }

  .cart-totals p {
    font-size: 1.2rem;
    margin: 0.5rem 0;
  }

  .cart-totals .subtotal {
    font-weight: bold;
  }

  .cart-totals .savings {
    color: #D32F2F;
  }

  .checkout-button {
    display: inline-block;
    padding: 0.75rem 1.5rem;
    background-color: #28A745;
    color: #FFFFFF;
    text-decoration: none;
    border-radius: 4px;
    margin-top: 1rem;
  }

  /* Responsive Design */
  @media (max-width: 768px) {
    .title-wrapper {
      flex-direction: column;
      align-items: flex-start;
    }

    .continue-shopping-link {
      margin-top: 1rem;
    }

    .cart-items th,
    .cart-items td {
      display: block;
      width: 100%;
    }

    .cart-items tr {
      margin-bottom: 1rem;
      display: block;
    }

    .product-quantity {
      flex-direction: column;
      align-items: flex-start;
    }

    .product-quantity input {
      margin-bottom: 0.5rem;
    }

    .cart-totals {
      text-align: left;
    }
  }
</style>

<div class="cart-container">
  <cart-items class="container{% if cart == empty %} is-empty{% else %} section-{{ section.id }}-padding{% endif %}">
    <div class="title-wrapper">
      <h1>{{ 'sections.cart.title' | t }}</h1>
      <a href="{{ routes.all_products_collection_url }}" class="continue-shopping-link">{{ 'general.continue_shopping' | t }} &gt;</a>
    </div>

    {% if cart == empty %}
      <div class="cart-empty">
        <h2>{{ 'sections.cart.empty' | t }}</h2>
        <a href="{{ routes.all_products_collection_url }}" class="button">{{ 'general.continue_shopping' | t }}</a>
        {% if shop.customer_accounts_enabled and customer == null %}
          <h2>{{ 'sections.cart.login.title' | t }}</h2>
          <p>{{ 'sections.cart.login.paragraph_html' | t: link: routes.account_login_url }}</p>
        {% endif %}
      </div>
    {% else %}
      <form action="{{ routes.cart_url }}" method="post" id="cart">
        <table class="cart-items">
          <caption class="visually-hidden">{{ 'sections.cart.title' | t }}</caption>
          <thead>
            <tr>
              <th colspan="2">{{ 'sections.cart.headings.product' | t }}</th>
              <th>{{ 'sections.cart.headings.price' | t }}</th>
              <th>{{ 'sections.cart.headings.quantity' | t }}</th>
              <th>{{ 'sections.cart.headings.total' | t }}</th>
            </tr>
          </thead>
          <tbody>
            {% for item in cart.items %}
              <tr>
                <td class="product-image">
                  {% if item.image %}
                    <a href="{{ item.url }}">
                      <img src="{{ item.image | image_url: width: 150 }}" alt="{{ item.image.alt | escape }}">
                    </a>
                  {% endif %}
                </td>
                <td class="product-details">
                  <a href="{{ item.url }}" class="product-title">{{ item.product.title | escape }}</a>
                  {% if item.options_with_values.size > 0 %}
                    <ul class="product-options">
                      {% for option in item.options_with_values %}
                        <li>{{ option.name }}: {{ option.value }}</li>
                      {% endfor %}
                    </ul>
                  {% endif %}
                  {% if item.properties.size > 0 %}
                    <ul class="product-properties">
                      {% for property in item.properties %}
                        {% assign first_char = property.first | slice: 0 %}
                        {% unless first_char == '_' or property.last == blank %}
                          <li>{{ property.first }}: {{ property.last }}</li>
                        {% endunless %}
                      {% endfor %}
                    </ul>
                  {% endif %}
                </td>
                <td class="product-price">
                  {% if item.original_price != item.final_price %}
                    <span class="original-price">{{ item.original_price | money }}</span>
                    <span class="final-price">{{ item.final_price | money }}</span>
                  {% else %}
                    <span class="price">{{ item.final_price | money }}</span>
                  {% endif %}
                </td>
                <td class="product-quantity">
                  <input
                    type="number"
                    name="updates[]"
                    value="{{ item.quantity }}"
                    min="{{ item.variant.quantity_rule.min }}"
                    {% if item.variant.quantity_rule.max != null %}
                      max="{{ item.variant.quantity_rule.max }}"
                    {% endif %}
                    step="{{ item.variant.quantity_rule.increment }}"
                    aria-label="{{ 'products.product.quantity.input_label' | t: product: item.product.title | escape }}"
                  >
                  <a href="{{ item.url_to_remove }}" class="remove-item" aria-label="{{ 'sections.cart.remove_title' | t: title: item.title }}">&times;</a>
                </td>
                <td class="product-total">
                  {{ item.final_line_price | money }}
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
        <div class="cart-totals">
          <p class="subtotal">
            {{ 'cart.general.subtotal' | t }}:
            <span>{{ cart.total_price | money }}</span>
          </p>
          {% if cart.total_discount > 0 %}
            <p class="savings">
              {{ 'cart.general.savings' | t }}:
              <span>{{ cart.total_discount | money }}</span>
            </p>
          {% endif %}
          <a href="{{ routes.checkout_url }}" class="checkout-button">{{ 'cart.general.checkout' | t }}</a>
        </div>
      </form>
    {% endif %}
  </cart-items>
</div>

{% schema %}
{
  "name": "Cart Items",
  "settings": []
}
{% endschema %}
