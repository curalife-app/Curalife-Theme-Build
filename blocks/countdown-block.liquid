{% comment %}
	Renders a countdown timer block, utilizing the countdown-timer snippet.

	Accepts:
	- block: The block object containing settings.
	- section_id: The ID of the parent section (for unique elements).

	Usage:
	{% render 'countdown-block', block: block, section_id: section_id %}
{% endcomment %}

<div class="countdown-block-wrapper" {{ block.shopify_attributes }}>
	{%
		render 'countdown-timer',
		section_id: section_id | append: '-' | append: block.id,
		day: block.settings.day,
		month: block.settings.month,
		year: block.settings.year,
		hour: block.settings.hour,
		minute: block.settings.minute,
		urgencyMinutes: block.settings.urgency_minutes,
		bgColor: block.settings.bg_color,
		isShowDays: block.settings.is_show_days
	%}
</div>

{% schema %}
	{
		"name": "Countdown Timer",
		"settings": [
			{
				"type": "header",
				"content": "Target Date"
			},
			{
				"type": "range",
				"id": "year",
				"label": "Year",
				"min": 2024,
				"max": 2026,
				"step": 1,
				"default": 2024
			},
			{
				"type": "select",
				"id": "month",
				"label": "Month",
				"options": [
					{ "value": "Jan", "label": "January" },
					{ "value": "Feb", "label": "February" },
					{ "value": "Mar", "label": "March" },
					{ "value": "Apr", "label": "April" },
					{ "value": "May", "label": "May" },
					{ "value": "Jun", "label": "June" },
					{ "value": "Jul", "label": "July" },
					{ "value": "Aug", "label": "August" },
					{ "value": "Sep", "label": "September" },
					{ "value": "Oct", "label": "October" },
					{ "value": "Nov", "label": "November" },
					{ "value": "Dec", "label": "December" }
				]
			},
			{
				"type": "range",
				"id": "day",
				"label": "Day",
				"min": 1,
				"max": 31,
				"step": 1,
				"default": 1
			},
			{
				"type": "range",
				"id": "hour",
				"label": "Hour",
				"min": 0,
				"max": 23,
				"step": 1,
				"default": 10
			},
			{
				"type": "range",
				"id": "minute",
				"label": "Minute",
				"min": 0,
				"max": 59,
				"step": 1,
				"default": 0
			},
			{
				"type": "checkbox",
				"id": "is_show_days",
				"label": "Show Days",
				"default": true
			},
			{
				"type": "header",
				"content": "Urgency Countdown Settings"
			},
			{
				"type": "number",
				"id": "urgency_minutes",
				"label": "Urgency Minutes",
				"info": "The number of minutes to show the urgency countdown for. If not set, the countdown will relate to the date above."
			},
			{
				"type": "color",
				"id": "bg_color",
				"label": "Countdown Background Color"
			},
			{
				"type": "range",
				"id": "custom_width",
				"label": "Custom Block Width",
				"min": 10,
				"max": 100,
				"step": 5,
				"unit": "%",
				"default": 100,
				"info": "Sets the width percentage of this block within its row."
			},
			{
				"type": "range",
				"id": "custom_width_mobile",
				"label": "Custom Block Width Mobile",
				"min": 10,
				"max": 100,
				"step": 5,
				"unit": "%",
				"default": 100
			}
		],
		"presets": [
			{
				"name": "Countdown Timer"
			}
		]
	}
{% endschema %}
