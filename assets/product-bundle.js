var N=Object.defineProperty;var Q=(a,t,e)=>t in a?N(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e;var k=(a,t,e)=>Q(a,typeof t!="symbol"?t+"":t,e);import"./pubsub-chunk.js";function J(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}customElements.get("product-form")||customElements.define("product-form",class extends HTMLElement{constructor(){super(),this.form=this.querySelector("form"),this.form.querySelector("[name=id]").disabled=!1,this.form.addEventListener("submit",this.onSubmitHandler.bind(this)),this.cart=document.querySelector("cart-notification")||document.querySelector("cart-drawer"),this.submitButton=this.querySelector('[type="submit"]'),document.querySelector("cart-drawer")&&this.submitButton.setAttribute("aria-haspopup","dialog"),this.hideErrors=this.dataset.hideErrors==="true"}onSubmitHandler(t){if(t.preventDefault(),this.submitButton.getAttribute("aria-disabled")==="true")return;this.handleErrorMessage(),this.submitButton.setAttribute("aria-disabled",!0),this.submitButton.classList.add("loading"),this.querySelector(".submit-title").classList.add("hidden"),this.querySelector(".loading-overlay__spinner").classList.remove("hidden");const e=fetchConfig("javascript");e.headers["X-Requested-With"]="XMLHttpRequest",delete e.headers["Content-Type"];const i=new FormData(this.form);this.cart&&(typeof this.cart.getSectionsToRender=="function"?i.append("sections",this.cart.getSectionsToRender().map(s=>s.id)):i.append("sections",""),i.append("sections_url",window.location.pathname),typeof this.cart.setActiveElement=="function"&&this.cart.setActiveElement(document.activeElement)),e.body=i,fetch("".concat(routes.cart_add_url),e).then(s=>s.json()).then(s=>{if(s.status){typeof publish=="function"&&publish(PUB_SUB_EVENTS.cartError,{source:"product-form",productVariantId:i.get("id"),errors:s.errors||s.description,message:s.message}),this.handleErrorMessage(s.description);const r=this.submitButton.querySelector(".sold-out-message");if(!r)return;this.submitButton.setAttribute("aria-disabled",!0),this.submitButton.querySelector("span").classList.add("hidden"),r.classList.remove("hidden"),this.error=!0;return}else if(!this.cart){window.location=window.routes.cart_url;return}!this.error&&typeof publish=="function"&&publish(PUB_SUB_EVENTS.cartUpdate,{source:"product-form",productVariantId:i.get("id"),cartData:s}),this.error=!1;const n=this.closest("quick-add-modal");n?(document.body.addEventListener("modalClosed",()=>{setTimeout(()=>{typeof this.cart.renderContents=="function"&&this.cart.renderContents(s)})},{once:!0}),n.hide(!0)):typeof this.cart.renderContents=="function"&&this.cart.renderContents(s)}).catch(s=>{console.error(s)}).finally(()=>{this.submitButton.classList.remove("loading"),this.cart&&this.cart.classList.contains("is-empty")&&this.cart.classList.remove("is-empty"),this.error||this.submitButton.removeAttribute("aria-disabled"),this.querySelector(".submit-title").classList.remove("hidden"),this.querySelector(".loading-overlay__spinner").classList.add("hidden");let s=this.form.querySelector("[name=quantity]");s&&(s.value=1)})}handleErrorMessage(t=!1){this.hideErrors||(this.errorMessageWrapper=this.errorMessageWrapper||this.querySelector(".product-form__error-message-wrapper"),this.errorMessageWrapper&&(this.errorMessage=this.errorMessage||this.errorMessageWrapper.querySelector(".product-form__error-message"),this.errorMessageWrapper.toggleAttribute("hidden",!t),t&&(this.errorMessage.textContent=t)))}});class j extends HTMLElement{constructor(){super();k(this,"quantityUpdateUnsubscriber");this.input=this.querySelector("input"),this.changeEvent=new Event("change",{bubbles:!0}),this.input.addEventListener("change",this.onInputChange.bind(this)),this.querySelectorAll("button").forEach(e=>e.addEventListener("click",this.onButtonClick.bind(this)))}connectedCallback(){this.validateQtyRules(),this.quantityUpdateUnsubscriber=subscribe(PUB_SUB_EVENTS.quantityUpdate,this.validateQtyRules.bind(this))}disconnectedCallback(){this.quantityUpdateUnsubscriber&&this.quantityUpdateUnsubscriber()}onInputChange(e){this.validateQtyRules()}onButtonClick(e){e.preventDefault();const i=this.input.value;e.target.name==="plus"?this.input.stepUp():this.input.stepDown(),i!==this.input.value&&this.input.dispatchEvent(this.changeEvent)}validateQtyRules(){const e=parseInt(this.input.value);if(this.input.min){const i=parseInt(this.input.min);this.querySelector(".quantity__button[name='minus']").classList.toggle("disabled",e<=i)}if(this.input.max){const i=parseInt(this.input.max);this.querySelector(".quantity__button[name='plus']").classList.toggle("disabled",e>=i)}}}customElements.define("quantity-input",j);customElements.get("product-info")||customElements.define("product-info",class extends HTMLElement{constructor(){super();k(this,"cartUpdateUnsubscriber");k(this,"variantChangeUnsubscriber");this.input=this.querySelector(".quantity__input"),this.currentVariant=this.querySelector(".product-variant-id"),this.variantSelects=this.querySelector("variant-radios"),this.submitButton=this.querySelector('[type="submit"]')}connectedCallback(){this.input&&(this.quantityForm=this.querySelector(".product-form__quantity"),this.quantityForm&&(this.setQuantityBoundries(),this.dataset.originalSection||(this.cartUpdateUnsubscriber=subscribe(PUB_SUB_EVENTS.cartUpdate,this.fetchQuantityRules.bind(this))),this.variantChangeUnsubscriber=subscribe(PUB_SUB_EVENTS.variantChange,e=>{const i=this.dataset.originalSection?this.dataset.originalSection:this.dataset.section;e.data.sectionId===i&&(this.updateQuantityRules(e.data.sectionId,e.data.html),this.setQuantityBoundries())})))}disconnectedCallback(){this.cartUpdateUnsubscriber&&this.cartUpdateUnsubscriber(),this.variantChangeUnsubscriber&&this.variantChangeUnsubscriber()}setQuantityBoundries(){const e={cartQuantity:this.input.dataset.cartQuantity?parseInt(this.input.dataset.cartQuantity):0,min:this.input.dataset.min?parseInt(this.input.dataset.min):1,max:this.input.dataset.max?parseInt(this.input.dataset.max):null,step:this.input.step?parseInt(this.input.step):1};let i=e.min;const s=e.max===null?e.max:e.max-e.cartQuantity;s!==null&&(i=Math.min(i,s)),e.cartQuantity>=e.min&&(i=Math.min(i,e.step)),this.input.min=i,this.input.max=s,this.input.value=i,publish(PUB_SUB_EVENTS.quantityUpdate,void 0)}fetchQuantityRules(){!this.currentVariant||!this.currentVariant.value||(this.querySelector(".quantity__rules-cart .loading-overlay").classList.remove("hidden"),fetch("".concat(this.dataset.url,"?variant=").concat(this.currentVariant.value,"&section_id=").concat(this.dataset.section)).then(e=>e.text()).then(e=>{const i=new DOMParser().parseFromString(e,"text/html");this.updateQuantityRules(this.dataset.section,i),this.setQuantityBoundries()}).catch(e=>{console.error(e)}).finally(()=>{this.querySelector(".quantity__rules-cart .loading-overlay").classList.add("hidden")}))}updateQuantityRules(e,i){const s=i.getElementById("Quantity-Form-".concat(e)),n=[".quantity__input",".quantity__rules",".quantity__label"];for(let r of n){const l=this.quantityForm.querySelector(r),c=s.querySelector(r);if(!(!l||!c))if(r===".quantity__input"){const o=["data-cart-quantity","data-min","data-max","step"];for(let u of o){const p=c.getAttribute(u);p!==null&&l.setAttribute(u,p)}}else l.innerHTML=c.innerHTML}}});customElements.get("product-modal")||customElements.define("product-modal",class extends ModalDialog{constructor(){super()}hide(){super.hide()}show(t){super.show(t),this.showActiveMedia()}showActiveMedia(){this.querySelectorAll('[data-media-id]:not([data-media-id="'.concat(this.openedBy.getAttribute("data-media-id"),'"])')).forEach(n=>{n.classList.remove("active")});const t=this.querySelector('[data-media-id="'.concat(this.openedBy.getAttribute("data-media-id"),'"]')),e=t.querySelector("template"),i=e?e.content:null;t.classList.add("active"),t.scrollIntoView();const s=this.querySelector('[role="document"]');s.scrollLeft=(t.width-s.clientWidth)/2,t.nodeName=="DEFERRED-MEDIA"&&i&&i.querySelector(".js-youtube")&&t.loadContent()}});customElements.get("product-model")||customElements.define("product-model",class extends DeferredMedia{constructor(){super()}loadContent(){super.loadContent(),Shopify.loadFeatures([{name:"model-viewer-ui",version:"1.0",onLoad:this.setupModelViewerUI.bind(this)}])}setupModelViewerUI(t){t||(this.modelViewerUI=new Shopify.ModelViewerUI(this.querySelector("model-viewer")))}});window.ProductModel={loadShopifyXR(){Shopify.loadFeatures([{name:"shopify-xr",version:"1.0",onLoad:this.setupShopifyXR.bind(this)}])},setupShopifyXR(a){if(!a){if(!window.ShopifyXR){document.addEventListener("shopify_xr_initialized",()=>this.setupShopifyXR());return}document.querySelectorAll('[id^="ProductJSON-"]').forEach(t=>{window.ShopifyXR.addModels(JSON.parse(t.textContent)),t.remove()}),window.ShopifyXR.setupXRElements()}}};window.addEventListener("DOMContentLoaded",()=>{window.ProductModel&&window.ProductModel.loadShopifyXR()});customElements.get("quick-add-modal")||customElements.define("quick-add-modal",class extends ModalDialog{constructor(){super(),this.modalContent=this.querySelector('[id^="QuickAddInfo-"]')}hide(t=!1){const e=document.querySelector("cart-notification")||document.querySelector("cart-drawer");e&&e.setActiveElement(this.openedBy),this.modalContent.innerHTML="",t&&(this.openedBy=null),super.hide()}show(t){t.setAttribute("aria-disabled",!0),t.classList.add("loading"),t.querySelector(".loading-overlay__spinner").classList.remove("hidden"),fetch(t.getAttribute("data-product-url")).then(e=>e.text()).then(e=>{const i=new DOMParser().parseFromString(e,"text/html");this.productElement=i.querySelector('section[id^="MainProduct-"]'),this.preventDuplicatedIDs(),this.removeDOMElements(),this.setInnerHTML(this.modalContent,this.productElement.innerHTML),window.Shopify&&Shopify.PaymentButton&&Shopify.PaymentButton.init(),window.ProductModel&&window.ProductModel.loadShopifyXR(),this.removeGalleryListSemantic(),this.updateImageSizes(),this.preventVariantURLSwitching(),super.show(t)}).finally(()=>{t.removeAttribute("aria-disabled"),t.classList.remove("loading"),t.querySelector(".loading-overlay__spinner").classList.add("hidden")})}setInnerHTML(t,e){t.innerHTML=e,t.querySelectorAll("script").forEach(i=>{const s=document.createElement("script");Array.from(i.attributes).forEach(n=>{s.setAttribute(n.name,n.value)}),s.appendChild(document.createTextNode(i.innerHTML)),i.parentNode.replaceChild(s,i)})}preventVariantURLSwitching(){const t=this.modalContent.querySelector("variant-radios,variant-selects");t&&t.setAttribute("data-update-url","false")}removeDOMElements(){const t=this.productElement.querySelector("pickup-availability");t&&t.remove();const e=this.productElement.querySelector("product-modal");e&&e.remove();const i=this.productElement.querySelectorAll("modal-dialog");i&&i.forEach(s=>s.remove())}preventDuplicatedIDs(){const t=this.productElement.dataset.section;this.productElement.innerHTML=this.productElement.innerHTML.replaceAll(t,"quickadd-".concat(t)),this.productElement.querySelectorAll("variant-selects, variant-radios, product-info").forEach(e=>{e.dataset.originalSection=t})}removeGalleryListSemantic(){const t=this.modalContent.querySelector('[id^="Slider-Gallery"]');t&&(t.setAttribute("role","presentation"),t.querySelectorAll('[id^="Slide-"]').forEach(e=>e.setAttribute("role","presentation")))}updateImageSizes(){const t=this.modalContent.querySelector(".product");if(!t.classList.contains("product--columns"))return;const i=t.querySelectorAll(".product__media img");if(!i.length)return;let s="(min-width: 1000px) 715px, (min-width: 750px) calc((100vw - 11.5rem) / 2), calc(100vw - 4rem)";t.classList.contains("product--medium")?s=s.replace("715px","605px"):t.classList.contains("product--small")&&(s=s.replace("715px","495px")),i.forEach(n=>n.setAttribute("sizes",s))}});customElements.get("pickup-availability")||customElements.define("pickup-availability",class extends HTMLElement{constructor(){super(),this.hasAttribute("available")&&(this.errorHtml=this.querySelector("template").content.firstElementChild.cloneNode(!0),this.onClickRefreshList=this.onClickRefreshList.bind(this),this.fetchAvailability(this.dataset.variantId))}fetchAvailability(t){let e=this.dataset.rootUrl;e.endsWith("/")||(e=e+"/");const i="".concat(e,"variants/").concat(t,"/?section_id=pickup-availability");fetch(i).then(s=>s.text()).then(s=>{const n=new DOMParser().parseFromString(s,"text/html").querySelector(".shopify-section");this.renderPreview(n)}).catch(s=>{const n=this.querySelector("button");n&&n.removeEventListener("click",this.onClickRefreshList),this.renderError()})}onClickRefreshList(t){this.fetchAvailability(this.dataset.variantId)}renderError(){this.innerHTML="",this.appendChild(this.errorHtml),this.querySelector("button").addEventListener("click",this.onClickRefreshList)}renderPreview(t){const e=document.querySelector("pickup-availability-drawer");if(e&&e.remove(),!t.querySelector("pickup-availability-preview")){this.innerHTML="",this.removeAttribute("available");return}this.innerHTML=t.querySelector("pickup-availability-preview").outerHTML,this.setAttribute("available",""),document.body.appendChild(t.querySelector("pickup-availability-drawer"));const i=this.querySelector("button");i&&i.addEventListener("click",s=>{document.querySelector("pickup-availability-drawer").show(s.target)})}});customElements.get("pickup-availability-drawer")||customElements.define("pickup-availability-drawer",class extends HTMLElement{constructor(){super(),this.onBodyClick=this.handleBodyClick.bind(this),this.querySelector("button").addEventListener("click",()=>{this.hide()}),this.addEventListener("keyup",t=>{t.code.toUpperCase()==="ESCAPE"&&this.hide()})}handleBodyClick(t){const e=t.target;e!=this&&!e.closest("pickup-availability-drawer")&&e.id!="ShowPickupAvailabilityDrawer"&&this.hide()}hide(){this.removeAttribute("open"),document.body.removeEventListener("click",this.onBodyClick),document.body.classList.remove("overflow-hidden"),removeTrapFocus(this.focusElement)}show(t){this.focusElement=t,this.setAttribute("open",""),document.body.addEventListener("click",this.onBodyClick),document.body.classList.add("overflow-hidden"),trapFocus(this)}});const P={data:null,lastFetched:0,maxAge:2e3,async getCart(a=!1){const t=Date.now();if(!a&&this.data&&t-this.lastFetched<this.maxAge)return this.data;try{const e=await fetch("/cart.js?t="+t,{cache:"no-store",headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(!e.ok)throw new Error("Failed to fetch cart");return this.data=await e.json(),this.lastFetched=t,this.data}catch(e){throw console.error("Error fetching cart:",e),e}},invalidate(){this.data=null,this.lastFetched=0}},g={updateProperty(a,t,e){return a&&a[t]!==e?(a[t]=e,!0):!1},updateAttribute(a,t,e){return a&&a.getAttribute(t)!==e?(a.setAttribute(t,e),!0):!1},toggleClass(a,t,e){if(!a)return!1;const i=a.classList.contains(t);return e&&!i?(a.classList.add(t),!0):!e&&i?(a.classList.remove(t),!0):!1},updateStyle(a,t,e){return a&&a.style[t]!==e?(a.style[t]=e,!0):!1},createElement(a,t={},e=null){const i=document.createElement(a);return Object.entries(t).forEach(([s,n])=>{if(s==="className")i.className=n;else if(s==="innerHTML")i.innerHTML=n;else if(s==="textContent")i.textContent=n;else if(s==="style"&&typeof n=="object")Object.entries(n).forEach(([r,l])=>{i.style[r]=l});else if(s.startsWith("data-"))i.setAttribute(s,n);else if(s.startsWith("on")&&typeof n=="function"){const r=s.substring(2).toLowerCase();i.addEventListener(r,n)}else i[s]=n}),e&&e.appendChild(i),i}};function I(a,t="error"){const e=document.createElement("div");e.className="\n		cart-notification ".concat(t,"\n		fixed bottom-4 left-1/2 transform -translate-x-1/2\n		p-4 rounded-lg shadow-lg z-[2147483640]\n		transition-opacity duration-300\n	").replace(/\s+/g," "),t==="error"?e.classList.add("bg-red-100","border","border-red-400","text-red-700"):e.classList.add("bg-green-100","border","border-green-400","text-green-700"),e.innerHTML='\n		<div class="flex items-center">\n			<div class="mr-3">'.concat(t==="error"?"⚠️":"✅",'</div>\n			<div class="text-sm font-medium">').concat(a,'</div>\n			<button\n				class="hover:text-gray-500 ml-auto text-gray-400"\n				onclick="this.parentElement.parentElement.remove()"\n			>\n				✕\n			</button>\n		</div>\n	'),document.body.appendChild(e),setTimeout(()=>{e.classList.add("opacity-0"),setTimeout(()=>e.remove(),300)},5e3)}function O(a,t=""){var e,i,s,n;if(console.error("Error in ".concat(t,":"),{message:a.message,response:a.response,stack:a.stack,originalError:a}),a.response&&typeof a.response=="object"){if(a.response.description)return a.response.description;if(a.response.message)return a.response.message}if((e=a.message)!=null&&e.includes("network"))return"Network connection issue. Please check your internet connection and try again.";if((i=a.message)!=null&&i.includes("timeout"))return"Request timed out. Please try again.";if((s=a.message)!=null&&s.includes("sold out"))return"This product is currently sold out. Please try again later.";if((n=a.message)!=null&&n.includes("variant"))return"There was an issue with the selected option. Please try selecting a different option.";switch(t){case"cart-add":return"Unable to add items to your cart. Please try again.";case"checkout":return"Unable to proceed to checkout. Please try again.";case"frequency-selection":return"Unable to update subscription frequency. Please try again.";default:return"Something went wrong. Please try again or contact customer support."}}async function H(a=!1){try{return await P.getCart(a)}catch(t){throw console.error("Error in getCart:",t),new Error("Unable to access your cart")}}async function G(){try{const a=await fetch("/cart/clear.js",{method:"POST",cache:"no-store",headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}});if(!a.ok){const t=await a.json();throw Object.assign(new Error("Failed to clear cart"),{response:t})}return P.invalidate(),a.json()}catch(a){throw console.error("Error clearing cart:",a),a}}function B(a){if(!a)return{value:1,unit:"month"};let t=a.match(/(\d+)\s*Day/i);if(t)return{value:parseInt(t[1],10),unit:"day"};let e=a.match(/(\d+)\s*Week/i);if(e)return{value:parseInt(e[1],10),unit:"week"};let i=a.match(/(\d+)\s*Month/i);return i?{value:parseInt(i[1],10),unit:"month"}:{value:1,unit:"month"}}const A=new Map;class W{constructor(t,e){if(A.has(e.SID))return A.get(e.SID);this.container=t,this.config=e,this.elements={},this.state={selectedBox:null,selectedFrequency:null,isInitialLoad:!0,isLoading:!1,isRedirectingToCheckout:!1,productId:null,variantId:null,sellingPlanId:null,purchaseType:null,currencySymbol:this.config.currencySymbol||"$",loadingButton:null},this.container&&(A.set(e.SID,this),this.bindElements(),this.storeInitialProductData(),this.initState(),this.attachEventListeners(),this.moveCtaTextIfNeeded())}bindElements(){this.elements.productActions=this.container,!(!this.elements.productActions||!this.elements.productActions.classList.contains("product-actions"))&&(this.elements.purchaseOptionBoxes=this.elements.productActions.querySelectorAll(".variant-box"),this.elements.submitButton=this.elements.productActions.querySelector(".checkout-button button"),this.elements.submitSellingPlanId=this.elements.productActions.querySelector(".submit-selling-plan-id"),this.elements.submitVariantId=this.elements.productActions.querySelector(".submit-variant-id"),this.elements.sellingPlanInput=this.elements.productActions.querySelector('input[name="selling_plan"]'),this.elements.oneTimeButton=this.elements.productActions.querySelector(".one-time-add-to-cart"),this.elements.frequencyContainer=this.elements.productActions.querySelector("[data-frequency-container]"),this.elements.frequencyOptions=this.elements.productActions.querySelector("#frequency-options-".concat(this.config.SID)),this.elements.frequencyDropdown=this.elements.productActions.querySelector("#frequency-dropdown-".concat(this.config.SID)),this.elements.frequencyDescription=this.elements.productActions.querySelector(".frequency-description"),this.elements.priceDisplays=this.elements.productActions.querySelectorAll(".price-display"),this.elements.ctaText=this.container.querySelector(".cta-text"),this.elements.giftContainer=this.elements.productActions.querySelector(".gift-container"))}storeInitialProductData(){var e;window.productData||(window.productData={});const t=this.container.dataset.productId;t&&(this.state.productId=t,(e=window.productData[t])!=null&&e.initialized?this.config.product=window.productData[t]:window.productData[t]||(window.productData[t]={id:t,variants:[],initialized:!1}))}setState(t){const e={...this.state};Object.assign(this.state,t),this.updateUI(t,e)}updateUI(t,e){"isLoading"in t&&this.updateLoadingState(this.state.isLoading),"selectedBox"in t&&this.state.selectedBox!==e.selectedBox&&this.updateSelectedBoxUI(this.state.selectedBox),("selectedFrequency"in t||"sellingPlanId"in t)&&this.updateFrequencyUI()}updateSelectedBoxUI(t){if(!t||!this.elements.productActions)return;const e=t.dataset.purchaseType==="subscribe",i=t.dataset.variant;let s=e?t.dataset.subscriptionSellingPlanId:null;this.elements.submitSellingPlanId&&(this.elements.submitSellingPlanId.value=s||""),this.elements.submitVariantId&&(this.elements.submitVariantId.value=i||""),this.elements.sellingPlanInput&&(this.elements.sellingPlanInput.value=s||""),this.setState({sellingPlanId:s,variantId:i,purchaseType:t.dataset.purchaseType,productId:t.dataset.product}),this.elements.purchaseOptionBoxes.forEach(n=>{const r=n===t;n.setAttribute("aria-selected",r?"true":"false");const l=n.querySelector('input[type="radio"]');l&&g.updateProperty(l,"checked",r)}),this.updateBuyButtonTracking(t),this.updatePriceDisplay(t),this.handleFrequencySelectorVisibility(e,t),this.config.isSlideVariant&&this.updateVariantImage(t)}updateFrequencyUI(){var i;const t=this.state.sellingPlanId;if(!t)return;const e=((i=this.elements.frequencyContainer)==null?void 0:i.dataset.uiType)||"tabs";e==="tabs"&&this.elements.frequencyOptions?this.elements.frequencyOptions.querySelectorAll("div[data-selling-plan-id]").forEach(s=>{const r=s.getAttribute("data-selling-plan-id")===t;s.setAttribute("aria-selected",r?"true":"false")}):e==="dropdown"&&this.elements.frequencyDropdown&&this.elements.frequencyDropdown.value!==t&&(this.elements.frequencyDropdown.value=t),this.updateFrequencyDescription()}updateLoadingState(t){const{loadingButton:e}=this.state;if(this.elements.submitButton){const i=t&&e==="submit";this.elements.submitButton.setAttribute("aria-busy",i?"true":"false"),this.elements.submitButton.disabled=i,i?this.elements.submitButton.innerHTML='<div class="border-white/20 border-t-white animate-spin inline-block w-6 h-6 mx-auto border-2 rounded-full"></div>':this.elements.submitButton.innerHTML=this.elements.submitButton.getAttribute("data-original-text")||"Add To Cart"}if(this.elements.oneTimeButton){const i=t&&e==="oneTime";this.elements.oneTimeButton.setAttribute("aria-busy",i?"true":"false"),this.elements.oneTimeButton.disabled=i,i?this.elements.oneTimeButton.innerHTML='<div class="border-primary/20 border-t-primary animate-spin inline-block w-4 h-4 mr-2 align-middle border-2 rounded-full"></div> Adding...':this.elements.oneTimeButton.innerHTML=this.elements.oneTimeButton.getAttribute("data-original-text")||"One-Time Purchase"}this.elements.productActions&&this.elements.productActions.setAttribute("data-processing",t?"true":"false")}handleFrequencySelectorVisibility(t,e){this.elements.frequencyContainer&&(t?(g.toggleClass(this.elements.frequencyContainer,"hidden",!1),this.elements.frequencyContainer.style.display==="none"&&(this.elements.frequencyContainer.style.display="block"),this.populateFrequencySelector(e)):g.toggleClass(this.elements.frequencyContainer,"hidden",!0))}initState(){var i;if(!this.elements.productActions||!((i=this.elements.purchaseOptionBoxes)!=null&&i.length)>0)return;const t=parseInt(this.elements.productActions.dataset.defaultVariantIndex,10)||0;let e=null;t>0&&this.elements.purchaseOptionBoxes.length>=t&&(e=this.elements.purchaseOptionBoxes[t-1]),e||(e=Array.from(this.elements.purchaseOptionBoxes).find(s=>s.dataset.purchaseType==="subscribe")||this.elements.purchaseOptionBoxes[0]),this.elements.submitButton&&this.elements.submitButton.setAttribute("data-original-text",this.elements.submitButton.textContent),this.elements.oneTimeButton&&this.elements.oneTimeButton.setAttribute("data-original-text",this.elements.oneTimeButton.textContent),e&&(this.state.selectedBox=e,this.state.purchaseType=e.dataset.purchaseType||null,this.state.variantId=e.dataset.variant||null,this.state.productId=e.dataset.product||null,this.state.purchaseType==="subscribe"?this.state.sellingPlanId=null:this.state.sellingPlanId=null,this.updateSelectedBoxUI(e),this.state.purchaseType==="subscribe"&&this.handleFrequencySelectorVisibility(!0,e)),setTimeout(()=>this.setState({isInitialLoad:!1}),100)}attachEventListeners(){this.elements.productActions&&(this.elements.productActions.addEventListener("click",t=>{const e=t.target.closest(".variant-boxes .variant-box");e&&e.getAttribute("aria-selected")!=="true"&&(t.preventDefault(),this.setState({selectedBox:e}))}),this.elements.productActions.addEventListener("keydown",t=>{if(t.key!=="Enter"&&t.key!==" ")return;const e=t.target.closest(".variant-boxes .variant-box");e&&e.getAttribute("aria-selected")!=="true"&&(t.preventDefault(),this.setState({selectedBox:e}))}),this.elements.frequencyOptions&&(this.elements.frequencyOptions.addEventListener("click",t=>{const e=t.target.closest(".frequency-box[data-selling-plan-id]");e&&this.selectFrequencyOption(e)}),this.elements.frequencyOptions.addEventListener("keydown",t=>{if(t.key!=="Enter"&&t.key!==" ")return;const e=t.target.closest(".frequency-box[data-selling-plan-id]");e&&(t.preventDefault(),this.selectFrequencyOption(e))})),this.elements.frequencyDropdown&&this.elements.frequencyDropdown.addEventListener("change",t=>{this.selectFrequencyOption(t.target.options[t.target.selectedIndex]),t.target.blur()}),this.elements.submitButton&&this.elements.submitButton.addEventListener("click",async t=>{if(t.preventDefault(),!(this.state.isLoading||this.state.isRedirectingToCheckout)){this.setState({isLoading:!0,loadingButton:"submit"});try{const e=this.prepareItemsForCart();if(!e){this.setState({isLoading:!1,loadingButton:null});return}this.config.buyType==="buy_now"?await this.handleBuyNowFlow(e):(await this.addValidItemsToCart(e),this.setState({isLoading:!1,loadingButton:null}))}catch(e){console.error("Submit error:",e),I(O(e,"checkout"),"error"),this.setState({isLoading:!1,loadingButton:null})}}}),this.elements.oneTimeButton&&this.elements.oneTimeButton.addEventListener("click",async t=>{var e;if(t.preventDefault(),!(this.state.isLoading||this.state.isRedirectingToCheckout)){this.setState({isLoading:!0,loadingButton:"oneTime"});try{const i=this.elements.oneTimeButton.dataset.variantId;if(!i)throw new Error("Invalid variant ID for one-time purchase");let s=[{id:parseInt(i,10),quantity:1}];if(this.config.isOneTimeGift){const n=this.getSelectedGiftId(!1);if(n&&n.id){const r={id:parseInt(n.id,10),quantity:1,properties:{_gift:"true"}};n.selling_plan_id&&(r.selling_plan=n.selling_plan_id,console.log("Adding one-time gift with selling plan: ".concat(n.selling_plan_id))),s.push(r)}else((e=this.elements.productActions)==null?void 0:e.dataset.giftsAmount)>0}this.config.buyType==="buy_now"?await this.handleBuyNowFlow(s):(await this.addValidItemsToCart(s),this.elements.oneTimeButton.innerHTML="✓ Added!",this.elements.oneTimeButton.classList.add("text-green-700","border-green-700"),this.elements.oneTimeButton.classList.remove("text-red-600","border-red-600"),setTimeout(()=>{this.setState({isLoading:!1,loadingButton:null}),this.elements.oneTimeButton.classList.remove("text-green-700","border-green-700")},2e3))}catch(i){console.error("One-time add error:",i),I(O(i,"cart-add"),"error"),this.elements.oneTimeButton.innerHTML="⚠ Failed",this.elements.oneTimeButton.classList.add("text-red-600","border-red-600"),this.elements.oneTimeButton.classList.remove("text-green-700","border-green-700"),setTimeout(()=>{this.setState({isLoading:!1,loadingButton:null}),this.elements.oneTimeButton.classList.remove("text-red-600","border-red-600")},2e3)}}}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&setTimeout(()=>{this.state.selectedBox&&this.state.purchaseType==="subscribe"&&this.handleFrequencySelectorVisibility(!0,this.state.selectedBox)},100)}),window.addEventListener("pageshow",t=>{t.persisted&&this.state.selectedBox&&this.updateSelectedBoxUI(this.state.selectedBox)}))}prepareItemsForCart(){var l,c;if(!this.state.selectedBox)return I("Please select a purchase option"),null;const e=this.state.variantId,i=this.state.purchaseType==="subscribe",s=i?this.state.sellingPlanId:null;if(!e)return I("Invalid product option selected"),null;if(i&&!s){const o=this.findVariantInProductData(e);if(((l=o==null?void 0:o.selling_plan_allocations)==null?void 0:l.length)>0)this.state.sellingPlanId=o.selling_plan_allocations[0].selling_plan.id;else return I("Please select a subscription frequency"),null}let n=[{id:parseInt(e,10),quantity:1,...i&&this.state.sellingPlanId?{selling_plan:this.state.sellingPlanId}:{}}];if(parseInt(((c=this.elements.productActions)==null?void 0:c.dataset.giftsAmount)||"0",10)>0){const o=this.getSelectedGiftId(i);if(!o||!o.id)return I("Please select your free gift"),null;const u={id:parseInt(o.id,10),quantity:1,properties:{_gift:"true"}};o.selling_plan_id&&(u.selling_plan=o.selling_plan_id,console.log("Adding gift with selling plan: ".concat(o.selling_plan_id))),n.push(u)}return n}getSelectedGiftId(t){if(!this.elements.giftContainer)return null;const e=this.elements.giftContainer.querySelector(".gift-box.selected");if(!e)return null;const i=e.querySelector(".gift-option-border");if(!i)return null;const s=t?i.dataset.giftIdSubscription:i.dataset.giftId,n=t?i.dataset.giftSellingPlanIdSubscription:i.dataset.giftSellingPlanId;return{id:s,selling_plan_id:n?parseInt(n,10):null}}async handleBuyNowFlow(t){try{this.setState({isRedirectingToCheckout:!0});const e=document.getElementById("upCart");e&&e.remove(),await G();const i=await fetch("/cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:t}),cache:"no-store"});if(!i.ok){const s=await i.json();throw Object.assign(new Error("Failed to add items for buy now"),{response:s})}P.invalidate();try{const s=await H(!0);console.log("=== CHECKOUT DEBUG INFO ==="),console.log("Cart Items:",s.items),console.log("Item Count:",s.item_count),console.log("Total Price:",s.total_price),console.log("Items Detail:"),s.items.forEach((n,r)=>{console.log("Item ".concat(r+1,":"),{title:n.title,variant_title:n.variant_title,quantity:n.quantity,price:n.price,line_price:n.line_price,final_price:n.final_price,discounted_price:n.discounted_price,selling_plan_allocation:n.selling_plan_allocation,variant_id:n.variant_id,sku:n.sku,properties:n.properties})}),console.log("Cart Attributes:",s.attributes),console.log("Original Total Price:",s.original_total_price),console.log("Cart Token:",s.token),console.log("=== END CHECKOUT DEBUG INFO ===")}catch(s){console.warn("Failed to log checkout debug info:",s)}this.setState({isRedirectingToCheckout:!1,isLoading:!1,loadingButton:null}),setTimeout(()=>{window.location.href="/checkout"},50)}catch(e){throw console.error("handleBuyNowFlow error:",e),this.setState({isRedirectingToCheckout:!1,isLoading:!1,loadingButton:null}),e}}async addValidItemsToCart(t){try{const e=t.find(s=>s.selling_plan);if(e){let s=await H(!0);const n=e.id,r={};s.items.forEach(l=>{l.selling_plan_allocation&&l.variant_id===n&&(r[l.key]=0)}),Object.keys(r).length>0&&(await fetch("/cart/update.js",{method:"POST",headers:{"Content-Type":"application/json","Cache-Control":"no-cache"},cache:"no-store",body:JSON.stringify({updates:r})}),P.invalidate())}const i=await fetch("/cart/add.js",{method:"POST",headers:{"Content-Type":"application/json","Cache-Control":"no-cache"},cache:"no-store",body:JSON.stringify({items:t})});if(!i.ok){const s=await i.json();throw Object.assign(new Error("Failed to add items to cart"),{response:s})}return P.invalidate(),typeof window.updateCart=="function"&&window.updateCart(),I("Items added to cart!","success"),i.json()}catch(e){throw console.error("Error in addValidItemsToCart:",e),e}}updatePriceDisplay(t){if(!this.elements.priceDisplays||this.elements.priceDisplays.length===0||!t)return;parseFloat(t.dataset.subscriptionItemPrice),parseFloat(t.dataset.subscriptionPrice);const e=parseFloat(t.dataset.originalItemCap)||0,i=parseInt(t.dataset.bottleQuantity,10)||1;if(e===0)return;const s=e*i,n=parseFloat(t.dataset.subscriptionDiscount)||0,r=parseFloat(t.dataset.firstMonthDiscount)||0,c=(100-(n+r))/100,o=e*c,u=s*c,p=(100-n)/100,b=e*p,_=s*p,d=this.config.priceFormat==="per_bottle"?o:u,f=this.config.priceFormat==="per_bottle"?e:s,h=this.config.priceFormat==="per_bottle"?b:_,m=f-d,T=m/100,w=Math.round(T),v=w>0?"SAVE ".concat(this.state.currencySymbol).concat(w):"",q=y=>"".concat(this.state.currencySymbol).concat((y/100).toFixed(2)),M=q(d),F=q(f),R=q(h),U=r>0?"Special price for first order. Refills for ".concat(R).concat(this.config.priceFormat==="per_bottle"?"/bottle":"","."):"",$=this.config.priceFormat==="per_bottle"&&u!==o?"Total ".concat(q(u/100),' <span class="total-price-cap text-gray-500 line-through">').concat(q(s/100),"</span>"):"";this.elements.priceDisplays.forEach(y=>{const x=y.querySelector(".main-price .price"),L=y.querySelector(".cap"),S=y.querySelector(".discount-badge"),E=y.querySelector(".total-line"),C=y.querySelector(".future-price-notice"),D=y.querySelector(".per-text"),V=x&&x.textContent!==M||L&&L.textContent!==F||S&&S.textContent!==v||E&&E.innerHTML!==$||C&&C.textContent!==U;y.setAttribute("data-price-format",this.config.priceFormat),y.setAttribute("data-has-savings",m>0?"true":"false"),V&&!this.state.isInitialLoad?(y.setAttribute("data-updating","true"),setTimeout(()=>{x&&(x.textContent=M),L&&(L.textContent=F),S&&(S.textContent=v,S.setAttribute("data-visible",m>0&&this.config.priceFormat==="total"?"true":"false")),E&&(E.innerHTML=$),C&&(C.textContent=U),D&&(D.style.display=this.config.priceFormat==="total"?"none":""),y.setAttribute("data-updating","false")},220)):(x&&(x.textContent=M),L&&(L.textContent=F),S&&(S.textContent=v,S.setAttribute("data-visible",m>0&&this.config.priceFormat==="total"?"true":"false")),E&&(E.innerHTML=$),C&&(C.textContent=U),D&&(D.style.display=this.config.priceFormat==="total"?"none":""))})}performSlideUpdate(t,e){try{if(!t||!e)return;const i=Array.from(t.slides).findIndex(s=>s.dataset.variantId===e);i!==-1&&t.activeIndex!==i&&(t.update(),requestAnimationFrame(()=>{t.slideTo(i,300)}))}catch(i){console.error("Swiper slide update error:",i)}}updateVariantImage(t){var n;const e=t.dataset.variant;if(!e)return;const i="productSliderAllInOne".concat(this.config.SID);let s=window[i];if((n=s==null?void 0:s.slides)!=null&&n.length)this.performSlideUpdate(s,e);else{let r=0;const l=50,c=setInterval(()=>{var o;s=window[i],(o=s==null?void 0:s.slides)!=null&&o.length?(clearInterval(c),this.performSlideUpdate(s,e)):++r>=l&&(clearInterval(c),console.warn("Swiper instance ".concat(i," not found after ").concat(l," attempts.")))},100)}}updateBuyButtonTracking(t){if(!this.elements.submitButton||!t)return;const e=t.dataset.sku,i=t.dataset.purchaseType,s=this.elements.submitButton.getAttribute("name")||"";if(s.startsWith("track:")){const n=s.split("|"),r=n[0],l={};n.slice(1).forEach(o=>{const[u,p]=o.split(":");u&&(l[u]=p)}),l["variant-sku"]=e,l["purchase-type"]=i;const c="".concat(r,"|").concat(Object.entries(l).map(([o,u])=>"".concat(o,":").concat(u)).join("|"));g.updateAttribute(this.elements.submitButton,"name",c)}g.updateAttribute(this.elements.submitButton,"data-sku",e),g.updateAttribute(this.elements.submitButton,"data-purchase-type",i)}selectFrequencyOption(t){if(!t)return;let e=null,i=null;typeof t=="string"?(e=t,this.elements.frequencyOptions?i=this.elements.frequencyOptions.querySelector('[data-selling-plan-id="'.concat(e,'"]')):this.elements.frequencyDropdown&&(i=Array.from(this.elements.frequencyDropdown.options).find(s=>s.value===e))):t.nodeType===1&&(i=t,e=i.dataset.sellingPlanId||i.value),!(!e||e===this.state.sellingPlanId)&&(this.setState({selectedFrequency:i,sellingPlanId:e}),this.elements.submitSellingPlanId&&(this.elements.submitSellingPlanId.value=e),this.elements.sellingPlanInput&&(this.elements.sellingPlanInput.value=e),this.state.selectedBox&&this.state.selectedBox.dataset.purchaseType==="subscribe"&&(this.state.selectedBox.dataset.subscriptionSellingPlanId=e))}populateFrequencySelector(t){var p,b,_;if(!t||t.dataset.purchaseType!=="subscribe"||!this.elements.frequencyContainer){this.elements.frequencyContainer&&this.elements.frequencyContainer.classList.add("hidden");return}const e=t.dataset.originalVariant||t.dataset.variant,i=t.dataset.allowedSellingPlans,s=i?i.split(",").map(d=>d.trim()):null,n=this.elements.frequencyContainer.dataset.uiType||"tabs",r=n==="dropdown"?this.elements.frequencyDropdown:this.elements.frequencyOptions;if(!r){console.error("Frequency options container not found for UI type: ".concat(n)),this.elements.frequencyContainer.classList.add("hidden");return}r.innerHTML="";const l=this.findVariantInProductData(e);if(!((p=l==null?void 0:l.selling_plan_allocations)!=null&&p.length)){console.warn("No selling plan allocations found for variant ".concat(e,". Hiding frequency selector.")),this.handleFallbackFrequencyOptions(t,r,this.elements.frequencyContainer);return}let c=l.selling_plan_allocations;if(s&&(c=c.filter(d=>s.includes(d.selling_plan.id.toString())),c.length===0)){console.warn("No selling plans matched the allowed list for variant ".concat(e,":"),i),this.handleFallbackFrequencyOptions(t,r,this.elements.frequencyContainer);return}c.sort((d,f)=>{const h=B(d.selling_plan.name),m=B(f.selling_plan.name),T=h.unit==="month"?h.value*30:h.unit==="week"?h.value*7:h.value,w=m.unit==="month"?m.value*30:m.unit==="week"?m.value*7:m.value;return T-w});const o=parseInt(t.dataset.bottleQuantity||"1",10);let u=null;if(c.forEach(d=>{const{value:f,unit:h}=B(d.selling_plan.name);(h==="month"&&f===o||o===1&&h==="day"&&f===30||h==="week"&&f===4)&&(u=d.selling_plan.id.toString())}),this.state.isInitialLoad||!this.state.sellingPlanId){let d=u||this.state.sellingPlanId||t.dataset.subscriptionSellingPlanId||((b=c[0])==null?void 0:b.selling_plan.id.toString());this.state.sellingPlanId=d,this.elements.submitSellingPlanId&&(this.elements.submitSellingPlanId.value=d),this.elements.sellingPlanInput&&(this.elements.sellingPlanInput.value=d),t.dataset.subscriptionSellingPlanId=d}else this.state.sellingPlanId||t.dataset.subscriptionSellingPlanId||u||((_=c[0])==null||_.selling_plan.id.toString());console.log("populateFrequencySelector: bottleQuantity=".concat(o,", recommendedPlanId=").concat(u,", planIdToSelect=").concat(this.state.sellingPlanId)),c.forEach(d=>{const f=d.selling_plan,{value:h,unit:m}=B(f.name),T=f.id.toString()===this.state.sellingPlanId,w=f.id.toString()===u;if(n==="dropdown"){let v="Every ".concat(h," ").concat(m).concat(h>1?"s":"");w&&(v+=" (Recommended use)");const q=g.createElement("option",{value:f.id,textContent:v,selected:T,className:w?"text-primary":"","data-frequency-value":h,"data-frequency-unit":m});r.appendChild(q)}else{const v=g.createElement("div",{className:"frequency-box rounded border-2 border-primary-lighter cursor-pointer py-2 px-3 min-w-[90px] max-w-[168px] text-center w-full transition-all duration-300 ease-in-out aria-selected:bg-primary aria-selected:text-white aria-[selected=false]:bg-white aria-[selected=false]:text-primary hover:bg-gray-100","data-selling-plan-id":f.id,"data-frequency-value":h,"data-frequency-unit":m,"aria-selected":T?"true":"false",role:"tab",tabindex:"0",innerHTML:'<span class="font-semibold text-[14px] block">Every '.concat(h,'</span><span class="text-[12px] block">').concat(m).concat(h>1?"s":"","</span>")});r.appendChild(v)}}),n==="dropdown"&&this.elements.frequencyDropdown&&(this.elements.frequencyDropdown.value=this.state.sellingPlanId),this.updateFrequencyDescription(),this.elements.frequencyContainer.classList.remove("hidden")}handleFallbackFrequencyOptions(t,e,i){if(!e||!i)return;const s=t.dataset.subscriptionSellingPlanId,n=parseInt(t.dataset.bottleQuantity||"1",10);if(t.dataset.purchaseType==="subscribe"&&s){e.innerHTML="";const l=(i.dataset.uiType||"tabs")==="dropdown";let c=n,o="month";t.dataset.frequencyValue&&t.dataset.frequencyUnit&&(c=parseInt(t.dataset.frequencyValue,10),o=t.dataset.frequencyUnit);const u="Every ".concat(c," ").concat(o).concat(c>1?"s":"");if(l){const p=g.createElement("option",{value:s,textContent:u,selected:!0,"data-selling-plan-id":s,"data-frequency-value":c.toString(),"data-frequency-unit":o});e.appendChild(p)}else{const p=g.createElement("div",{className:"frequency-box rounded border-2 border-primary-lighter cursor-pointer py-2 px-3 min-w-[90px] max-w-[168px] text-center w-full transition-all duration-300 ease-in-out aria-selected:bg-primary aria-selected:text-white aria-[selected=false]:bg-white aria-[selected=false]:text-primary hover:bg-gray-100","data-selling-plan-id":s,"data-frequency-value":c.toString(),"data-frequency-unit":o,"aria-selected":"true",role:"tab",tabindex:"0",innerHTML:'<span class="font-semibold text-[14px] block">Every '.concat(c,'</span><span class="text-[12px] block">').concat(o).concat(c>1?"s":"","</span>")});e.appendChild(p)}i.classList.remove("hidden"),setTimeout(()=>this.updateFrequencyDescription(),50)}else i.classList.add("hidden"),e.innerHTML=""}updateFrequencyDescription(){var l,c;if(!this.elements.frequencyDescription||!this.state.selectedBox)return;const t=((l=this.elements.frequencyContainer)==null?void 0:l.dataset.uiType)||"tabs";if(t==="dropdown"){this.elements.frequencyDescription.innerHTML="",this.elements.frequencyDescription.style.display="none";return}const e=this.state.selectedBox,i=parseInt(e.dataset.bottleQuantity||"1",10);let s,n;if(this.state.sellingPlanId){let o;if(t==="tabs"&&this.elements.frequencyOptions&&(o=this.elements.frequencyOptions.querySelector('[data-selling-plan-id="'.concat(this.state.sellingPlanId,'"]'))),o!=null&&o.dataset.frequencyValue&&(o!=null&&o.dataset.frequencyUnit))s=parseInt(o.dataset.frequencyValue,10),n=o.dataset.frequencyUnit;else{const u=this.findVariantInProductData(this.state.variantId),p=(c=u==null?void 0:u.selling_plan_allocations)==null?void 0:c.find(b=>b.selling_plan.id.toString()===this.state.sellingPlanId);if(p){const b=B(p.selling_plan.name);s=b.value,n=b.unit}}}let r="";s&&n&&!(n==="month"&&s===i)&&(r="Recommended - ".concat(i," month").concat(i>1?"s":"")),this.elements.frequencyDescription.innerHTML!==r&&(this.elements.frequencyDescription.setAttribute("data-changing","true"),setTimeout(()=>{this.elements.frequencyDescription.innerHTML=r,setTimeout(()=>{this.elements.frequencyDescription.setAttribute("data-changing","false")},20)},200))}findVariantInProductData(t){if(!window.productData||!t)return null;const e=parseInt(t,10),i=window.productData[this.state.productId];if(i!=null&&i.variants){let s=i.variants.find(r=>parseInt(r.id,10)===e);if(s)return s;const n=this.state.selectedBox;if(n&&n.dataset.originalVariant){const r=parseInt(n.dataset.originalVariant,10);if(r===e){const l=parseInt(n.dataset.variant,10);if(s=i.variants.find(c=>parseInt(c.id,10)===l),s)return s}else if(s=i.variants.find(l=>parseInt(l.id,10)===r),s)return s}}return console.warn("Variant ".concat(t," not found in product data for product ").concat(this.state.productId)),null}moveCtaTextIfNeeded(){window.innerWidth<768&&this.elements.ctaText&&this.elements.productActions&&this.elements.ctaText.parentElement!==this.elements.productActions&&this.elements.productActions.insertAdjacentElement("afterbegin",this.elements.ctaText)}static getInstance(t){return A.get(t)}static getAllInstances(){return Array.from(A.values())}}document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[data-buy-box-new-root]").forEach((t,e)=>{var s;const i={SID:t.dataset.sid,buyType:t.dataset.buyType,priceFormat:t.dataset.priceFormat||"per_bottle",isSlideVariant:t.dataset.isSlideVariant==="true",isOneTimeGift:t.dataset.isOneTimeGift==="true",isOneTimePurchaseLink:t.dataset.isOneTimePurchaseLink==="true",currencySymbol:t.dataset.currencySymbol||"$",product:(s=window.productData)==null?void 0:s[t.dataset.productId]};i.SID&&(!i.product&&t.dataset.productId&&console.warn("BuyBoxNew (".concat(i.SID,"): Product data for ID ").concat(t.dataset.productId," not found in window.productData during initialization.")),new W(t,i))})});customElements.get("share-button")||customElements.define("share-button",class extends DetailsDisclosure{constructor(){super(),this.elements={shareButton:this.querySelector("button"),shareSummary:this.querySelector("summary"),closeButton:this.querySelector(".share-button__close"),successMessage:this.querySelector('[id^="ShareMessage"]'),urlInput:this.querySelector("input")},this.urlToShare=this.elements.urlInput?this.elements.urlInput.value:document.location.href,navigator.share?(this.mainDetailsToggle.setAttribute("hidden",""),this.elements.shareButton.classList.remove("hidden"),this.elements.shareButton.addEventListener("click",()=>{navigator.share({url:this.urlToShare,title:document.title})})):(this.mainDetailsToggle.addEventListener("toggle",this.toggleDetails.bind(this)),this.mainDetailsToggle.querySelector(".share-button__copy").addEventListener("click",this.copyToClipboard.bind(this)),this.mainDetailsToggle.querySelector(".share-button__close").addEventListener("click",this.close.bind(this)))}toggleDetails(){this.mainDetailsToggle.open||(this.elements.successMessage.classList.add("hidden"),this.elements.successMessage.textContent="",this.elements.closeButton.classList.add("hidden"),this.elements.shareSummary.focus())}copyToClipboard(){navigator.clipboard.writeText(this.elements.urlInput.value).then(()=>{this.elements.successMessage.classList.remove("hidden"),this.elements.successMessage.textContent=window.accessibilityStrings.shareSuccess,this.elements.closeButton.classList.remove("hidden"),this.elements.closeButton.focus()})}updateUrl(t){this.urlToShare=t,this.elements.urlInput.value=t}});class X extends HTMLElement{constructor(){super(),this.querySelector("button").addEventListener("click",e=>{this.expandShowMore(e);const i=e.target.closest(".parent-display").querySelector(".show-more-item");i&&!i.classList.contains("hidden")&&i.querySelector("input").focus()})}expandShowMore(t){const e=t.target.closest('[id^="Show-More-"]').closest(".parent-display");e.querySelector(".parent-wrap"),this.querySelectorAll(".label-text").forEach(i=>i.classList.toggle("hidden")),e.querySelectorAll(".show-more-item").forEach(i=>i.classList.toggle("hidden"))}}customElements.define("show-more-button",X);console.log("📦 Product bundle loaded - Product page functionality initialized");export{J as __vite_legacy_guard};
