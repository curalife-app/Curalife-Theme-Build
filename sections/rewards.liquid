.{%- comment -%} If store is US {%- endcomment -%}
{% if shop.name == 'CuraLife' %}
  {% assign yotpo_rewards_widget_id = "584162" %}
  {% assign yotpo_rewards_raf_widget_id = "35419" %}
  {% assign yotpo_script_id = "5AyB8SFKOjnnor-g4qIeMg" %}
  {% assign rewards_signup_modal_id = "VbQeKW" %}
  {% assign rewards_signup_sms_modal_id = "UXbHiM" %}
{% elsif shop.name == "CuraLife Global" %}
  {% assign yotpo_rewards_widget_id = "578292" %}
  {% assign yotpo_rewards_raf_widget_id = "73923" %}
  {% assign yotpo_script_id = "oMYBvmnASlHzmouicgkepg" %}
  {% assign rewards_signup_modal_id = "Svgepi" %}
  {% assign rewards_signup_sms_modal_id = "Xtwmbf" %}
{% endif %}

<h1 style="display:none">Rewards</h1>
<script src="https://cdn-widgetsrepository.yotpo.com/v1/loader/{{ yotpo_script_id }}" async></script>
<div class="yotpo-widget-instance" data-yotpo-instance-id="{{ yotpo_rewards_widget_id }}"></div>
<div class="yotpo-widget-instance" data-yotpo-instance-id="{{ yotpo_rewards_raf_widget_id }}"></div>

<script>
  // Extract URL parameters
  const urlParams = new URLSearchParams(window.location.search);

  // Define a function to open a rewards modal based on a modal ID
  function openRewardsModal(modalId) {
    window._klOnsite = window._klOnsite || [];
    window._klOnsite.push(['openForm', modalId]);
  }

  // Check for 'signup' or 'signup_sms' parameters and open the corresponding modal
  const signup = urlParams.get('signup');
  const signupSMS = urlParams.get('signup_sms');

  if (signup === 'true') {
    openRewardsModal('{{ rewards_signup_modal_id }}');
  } else if (signupSMS === 'true') {
    openRewardsModal('{{ rewards_signup_sms_modal_id }}');
  }
</script>